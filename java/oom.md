# 内存泄露和内存溢出
#### 内存溢出
* 原因：指程序在申请内存时，没有足够的内存空间供其使用，出现out of memory；比如申请了一个integer,但给它存了long才能存下的数，那就是内存溢出
* 常见的内存溢出
   1. 死循环导致内存溢出
   2. 递归的无限调用导致内存溢出
   3. 图片加载导致内存溢出


#### 内存泄露
* 原因：指对象不再使用，本该被回收，却因为有其他正在使用的对象持有该对象的引用，而无法被JVM回收
* 影响：
   1. 应用可用内存减少，增加堆内存压力
   2. 频繁触发GC，会降低了应用的性能
   3. 到一定程序会导致内存溢出错误
* Android开发中常见内存泄漏及解决办法
   1. 静态变量生命周期与应用的生命周期一样，如果静态变量持有某个Activity的上下文，则对应Activity无法释放，导致内存泄漏（单例模式） 
    `解决办法`：使用Application的上下文
   2. 匿名内部类与非静态内部类因为都会持有外部类引用，当执行异步操作易导致内存泄漏  
    `解决办法`：将非静态内部类转为静态内部类+Weak Reference的方式
   3. Handler消息队列存在延时消息导致内存泄漏 
    `解决办法`：在onDestroy()中调用Handler相应的方法移除回调和删除消息
   4. 各种注册的监听器忘记移除导致内存泄漏 
   `解决办法`：在onDestroy方法中取消注册
   5. 资源对象未关闭导致内存泄漏，如(IO,数据库，Bitmap等) 
    `解决办法`：及时关闭资源
   6. 属性动画未取消导致内存泄漏(如无限轮播图效果) 
    `解决办法`：onDestroy方法中取消动画
   7. 其他解决办法：使用AAC框架(Jetpack组件)
* 内存泄漏排查工具： AS Monitor,MAT,Leak Canary
